# DayTraders Crew - Autonomous Trading Simulation

Welcome to the DayTraders Crew project, powered by [crewAI](https://crewai.com). This project implements a multi-agent AI system designed to simulate an autonomous AI team performing day trading analysis and execution on the **Alpaca paper trading platform**.

Leveraging CrewAI's framework, this system uses specialized agents operating in a hierarchical structure to:
*   Monitor market data and financial news.
*   Dynamically generate trading proposals based on analysis.
*   Perform risk assessment and position sizing.
*   Execute trades via custom Alpaca API tools.
*   Continuously monitor performance and adapt via manager feedback within a loop running during market hours.

**ðŸš¨ IMPORTANT DISCLAIMER ðŸš¨**

*   **Educational/Experimental Use ONLY:** This project is intended strictly for educational and experimental purposes to explore AI agent collaboration in a simulated financial context.
*   **PAPER TRADING ONLY:** All interactions are designed for use with an **Alpaca paper trading account**.
*   **DO NOT USE WITH REAL MONEY:** Financial markets are complex, volatile, and inherently risky. This system is **NOT designed or tested for live trading**. Using it with real funds could result in significant financial loss.
*   **No Guarantee of Performance:** The AI's performance is highly dependent on LLM capabilities, prompt engineering, market conditions, API latency, and the inherent limitations of simulating complex financial strategies. **Profits are NOT guaranteed, even in simulation.** Losses can and likely will occur.
*   **Not Financial Advice:** This project and its output do not constitute financial advice. Any trading decisions simulated by the crew are generated by AI agents based on their configuration and should not be replicated without independent, thorough analysis and professional consultation.

## Core Functionality

*   **Continuous Operation:** Runs in a loop during market hours (configurable in `main.py`).
*   **Specialized Agents:** Employs distinct agents for data retrieval, news analysis, adaptive strategy proposal, risk management, order execution, and overall crew management. (Defined in `config/agents.yaml`).
*   **Hierarchical Process:** Uses CrewAI's hierarchical process where a Manager agent oversees and guides the specialist agents.
*   **Dynamic Proposals:** The 'Adaptive Market Analyst' agent generates trade ideas based on current data and news, rather than following a single predefined strategy.
*   **Risk Management:** A dedicated agent enforces risk rules (position sizing, exposure limits) before any simulated trade execution.
*   **Alpaca Integration:** Uses custom tools (`tools/alpaca_trade_tools.py`) built with `alpaca-py` to interact with the Alpaca paper trading API.
*   **Performance Feedback:** A basic mechanism allows the Manager agent to provide guidance based on performance metrics.

## Installation

Ensure you have Python >=3.10 <3.13 installed. This project uses [UV](https://docs.astral.sh/uv/) for faster dependency management.

1.  **Install UV (if you haven't already):**
    ```bash
    pip install uv
    ```

2.  **Create a Virtual Environment and Install Dependencies:**
    Navigate to the project root directory in your terminal.
    ```bash
    # Create a virtual environment using uv (recommended)
    uv venv venv
    # Activate the virtual environment
    # Windows (Command Prompt/PowerShell)
    .\venv\Scripts\activate
    # macOS/Linux (Bash/Zsh)
    source venv/bin/activate

    # Install dependencies using uv (reads pyproject.toml)
    uv pip install -r requirements.txt 
    # Or if you have locked dependencies in requirements.lock:
    # uv pip sync requirements.lock
    ```
    *(Alternatively, if using the `crewai` CLI tool with project support):*
    ```bash
    # crewai install # (This might handle venv creation and installation)
    ```


## Configuration

Before running, you **MUST** configure your environment variables and potentially adjust parameters:

1.  **Environment Variables (`.env` file):**
    Create a `.env` file in the project root directory and add the following keys with your **Alpaca PAPER TRADING** and other service credentials:

    ```dotenv
    # OpenAI API Key (for agent LLMs)
    OPENAI_API_KEY="sk-..."

    # Serper API Key (for the News Analyst's search tool)
    SERPER_API_KEY="YOUR_SERPER_KEY"

    # Alpaca API Keys (Get from your Alpaca PAPER trading account dashboard)
    ALPACA_API_KEY_ID="YOUR_PAPER_API_KEY_ID"
    ALPACA_SECRET_KEY="YOUR_PAPER_SECRET_KEY"

    # Ensure Alpaca uses paper trading endpoint (true/false)
    ALPACA_PAPER="true" 
    ```

2.  **Agent & Task Configuration (`src/day_traders/config/`):**
    *   `agents.yaml`: Defines the roles, goals, and backstories of each specialized agent (Market Data Analyst, News Analyst, Adaptive Market Analyst, Risk Manager, Order Executor, Crew Manager). You can tweak prompts here to refine behavior.
    *   `tasks.yaml`: Defines the steps in the workflow, including descriptions, expected outputs, dependencies (`context`), and assigned agents.

3.  **Crew Logic (`src/day_traders/crew.py`):**
    *   Wires together agents, tasks, and tools.
    *   Configures the hierarchical process and assigns the manager agent/LLM.
    *   Instantiates all necessary tools (Alpaca tools, search tool).

4.  **Custom Tools (`src/day_traders/tools/alpaca_trade_tools.py`):**
    *   Contains the core logic for interacting with the Alpaca API (fetching data, placing orders, checking account status). Modify this if you need different Alpaca interactions.

5.  **Main Loop & Settings (`src/day_traders/main.py`):**
    *   Contains the continuous loop logic that runs the crew during market hours.
    *   Adjust `MARKET_OPEN_TIME`, `MARKET_CLOSE_TIME`, `MARKET_TIMEZONE`.
    *   Modify `CYCLE_DELAY_SECONDS` (how often the crew runs).
    *   Change the initial list of symbols (`'list_of_symbols'`) to monitor.
    *   Adjust parameters like `'data_timeframe'`, `'data_limit'`, `'news_time_window'`, and risk rules passed as inputs to the crew.

## Running the Project

To start the continuous trading loop:

1.  **Ensure your virtual environment is activated.**
2.  **Navigate to the project root directory.**
3.  **Run the `main.py` script:**

    ```bash
    python src/day_traders/main.py
    ```
    *(Alternatively, if `crewai run` is configured in `pyproject.toml` to execute `main.py`):*
    ```bash
    crewai run
    ```

You should see logs in your terminal indicating the loop has started, checking market hours, and executing trading cycles when the market is open. The output will include verbose logs from CrewAI showing agent actions, tool usage, and final outputs for each cycle (likely the Manager's performance review and guidance). **Monitor your Alpaca paper trading account dashboard to see any simulated orders placed.**

Press `CTRL+C` in the terminal to stop the loop manually.

## Understanding Your Crew

This DayTraders Crew simulates a trading team:
*   **Market Data Analyst:** Fetches price data via Alpaca tools.
*   **News Analyst:** Scans the web for relevant news using search tools.
*   **Adaptive Market Analyst:** Synthesizes data/news to propose trades with justifications (NO fixed strategy).
*   **Risk Manager:** Checks proposals against risk rules and calculates position size using Alpaca account data.
*   **Order Executor:** Places approved orders and monitors status via Alpaca tools.
*   **Crew Manager:** Oversees the cycle, reviews performance (using Alpaca P/L tools), and provides feedback/guidance to the team.

They work together in a **hierarchical process** managed by the Crew Manager, running repeatedly in the loop defined in `main.py`. The goal is adaptive decision-making within a defined risk framework.
